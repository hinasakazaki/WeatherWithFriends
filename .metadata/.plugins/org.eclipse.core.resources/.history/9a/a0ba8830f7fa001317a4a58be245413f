import java.io.BufferedInputStream;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;

import org.apache.http.util.ByteArrayBuffer;

import android.content.Context;
import android.os.AsyncTask;
import android.util.Log;

class getImageAsyncTask extends AsyncTask<String, Void, byte[]> {
		Context mContext;
		Long id;
		String[] responseString;
		
		public getImageAsyncTask (Long id, Context c) {
			mContext = c;
			this.id = id;
		}
		@Override
		protected byte[] doInBackground(String... params) {
			// TODO Auto-generated method stub
			responseString = params;
			return getImage(params[3]);
		}
		
		protected void onPostExecute(byte[] result) {
			Log.v("On image post execute", result.toString());
	
		}
		
	}
	private static byte[] getImage(String iconurl) {
		//get image stuff
		URL iUrl = null;
		try {
			iUrl = new URL(iconurl);
		} catch (MalformedURLException e1) {
			// TODO Auto-generated catch block
			e1.printStackTrace();
		}
		
		try {
			URLConnection ucon = iUrl.openConnection();
			
			InputStream is = ucon.getInputStream();
			
			BufferedInputStream bis = new BufferedInputStream(is);
			
			ByteArrayBuffer baf = new ByteArrayBuffer(500);
			
			int current = 0;
			
			while((current = bis.read()) != -1) {
				baf.append((byte) current);
			}
			
			return baf.toByteArray();
		} catch (Exception e) { //image manager error
			Log.d("ImageManager", "Error" +e.toString());
		}

		return null;

	}
}